function hookEvent(n,t,e){"string"==typeof n&&(n=document.getElementById(n)),null!=n&&(n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent&&n.attachEvent("on"+t,e))}function unhookEvent(n,t,e){"string"==typeof n&&(n=document.getElementById(n)),null!=n&&(n.removeEventListener?n.removeEventListener(t,e,!1):n.detachEvent&&n.detachEvent("on"+t,e))}function cancelEvent(n){return n=n?n:window.event,n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,n.cancel=!0,n.returnValue=!1,!1}function Position(n,t){this.X=n,this.Y=t,this.Add=function(n){var t=new Position(this.X,this.Y);return null!=n&&(isNaN(n.X)||(t.X+=n.X),isNaN(n.Y)||(t.Y+=n.Y)),t},this.Subtract=function(n){var t=new Position(this.X,this.Y);return null!=n&&(isNaN(n.X)||(t.X-=n.X),isNaN(n.Y)||(t.Y-=n.Y)),t},this.Min=function(n){var t=new Position(this.X,this.Y);return null==n?t:(!isNaN(n.X)&&this.X>n.X&&(t.X=n.X),!isNaN(n.Y)&&this.Y>n.Y&&(t.Y=n.Y),t)},this.Max=function(n){var t=new Position(this.X,this.Y);return null==n?t:(!isNaN(n.X)&&this.X<n.X&&(t.X=n.X),!isNaN(n.Y)&&this.Y<n.Y&&(t.Y=n.Y),t)},this.Bound=function(n,t){var e=this.Max(n);return e.Min(t)},this.Check=function(){var n=new Position(this.X,this.Y);return isNaN(n.X)&&(n.X=0),isNaN(n.Y)&&(n.Y=0),n},this.Apply=function(n){"string"==typeof n&&(n=document.getElementById(n)),null!=n&&(isNaN(this.X)||(n.style.left=this.X+"px"),isNaN(this.Y)||(n.style.top=this.Y+"px"))}}function absoluteCursorPostion(n){return n=n?n:window.event,isNaN(window.scrollX)?new Position(n.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,n.clientY+document.documentElement.scrollTop+document.body.scrollTop):new Position(n.clientX+window.scrollX,n.clientY+window.scrollY)}function dragObject(n,t,e,o,i,s,u,l){function r(t){return m||!X||p?void 0:(m=!0,null!=i&&i(t,n),v=absoluteCursorPostion(t),f=new Position(parseInt(n.style.left),parseInt(n.style.top)),f=f.Check(),hookEvent(document,"mousemove",c),hookEvent(document,"mouseup",a),cancelEvent(t))}function c(t){if(m&&!p){var i=absoluteCursorPostion(t);return i=i.Add(f).Subtract(v),i=i.Bound(e,o),i.Apply(n),null!=s&&s(i,n),cancelEvent(t)}}function a(n){return h(),cancelEvent(n)}function h(){m&&!p&&(unhookEvent(document,"mousemove",c),unhookEvent(document,"mouseup",a),v=null,f=null,null!=u&&u(n),m=!1)}if("string"==typeof n&&(n=document.getElementById(n)),null!=n){if(null!=e&&null!=o){var d=e.Min(o);o=e.Max(o),e=d}var v=null,f=null,m=!1,X=!1,p=!1;this.Dispose=function(){p||(this.StopListening(!0),n=null,t=null,e=null,o=null,i=null,s=null,u=null,p=!0)},this.StartListening=function(){X||p||(X=!0,hookEvent(t,"mousedown",r))},this.StopListening=function(n){X&&!p&&(unhookEvent(t,"mousedown",r),X=!1,n&&m&&h())},this.IsDragging=function(){return m},this.IsListening=function(){return X},this.IsDisposed=function(){return p},"string"==typeof t&&(t=document.getElementById(t)),null==t&&(t=n),l||this.StartListening()}}